{"id":"index.html","dependencies":[{"name":"./css/reset.css","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/css/reset.css","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./css/wall.css","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/css/wall.css","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./media/抽奖时候的音乐.mp3","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/media/抽奖时候的音乐.mp3","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./js/zepto.js","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/js/zepto.js","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./js/vue.js","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/js/vue.js","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./js/tagcanvas.js","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/js/tagcanvas.js","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./js/member.js","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/js/member.js","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"./js/bulletScreen.js","dynamic":true,"resolved":"/Users/ayto/Desktop/github/lottery/js/bulletScreen.js","parent":"/Users/ayto/Desktop/github/lottery/index.html"},{"name":"/Users/ayto/Desktop/github/lottery/postcss.config.js","includedInParent":true,"mtime":1547455954913},{"name":"_css_loader","parent":"/Users/ayto/Desktop/github/lottery/index.html","resolved":"/Users/ayto/.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"},{"name":"/Users/ayto/Desktop/github/lottery/.babelrc","includedInParent":true,"mtime":1547455967081},{"name":"/Users/ayto/Desktop/github/lottery/package.json","includedInParent":true,"mtime":1547457155059}],"generated":{"html":"<!DOCTYPE html>\n<html>\n\n<head>\n    <meta name=\"screen-orientation\" content=\"portrait\">\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0\">\n    <title>年会抽奖小程序</title>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/004ca7ea0ec481cf216651c7dc9ff4e8.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/b8933f33462cbb3c762247accf2d40ff.css\">\n    <style>body,\n        html {\n            width: 100%;\n            height: 100%;\n        }\n\n        .result {\n            position: absolute;\n            height: 320px;\n            width: 100%;\n            left: 0;\n            top: 50%;\n            margin-top: -160px;\n            text-align: center;\n            padding: 10px;\n            display: none;\n        }\n\n        .result span {\n            display: inline-block;\n            font-size: 25px;\n            width: 150px;\n            background: #fff;\n            line-height: 30px;\n            color: #000;\n            margin: 5px;\n            -webkit-border-radius: 10px;\n                    border-radius: 10px;\n            -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);\n                    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);\n            padding: 10px 0;\n        }\n\n        button,\n        input,\n        optgroup,\n        select,\n        textarea {\n            color: inherit;\n            font: inherit;\n            margin: 0;\n            border: none;\n        }\n\n        button {\n            overflow: visible;\n        }\n\n        button,\n        select {\n            text-transform: none;\n        }\n\n        button,\n        html input[type=button],\n        input[type=reset],\n        input[type=submit] {\n            -webkit-appearance: button;\n            cursor: pointer;\n        }\n\n        .pure-button {\n            display: inline-block;\n            zoom: 1;\n            line-height: normal;\n            white-space: nowrap;\n            vertical-align: middle;\n            text-align: center;\n            cursor: pointer;\n            -webkit-user-drag: none;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n        }\n\n        .pure-button {\n            font-family: inherit;\n            font-size: 100%;\n            padding: .5em 1em;\n            color: #444;\n            color: rgba(0, 0, 0, .8);\n            border: 0 rgba(0, 0, 0, 0);\n            background-color: #E6E6E6;\n            text-decoration: none;\n            -webkit-border-radius: 2px;\n                    border-radius: 2px;\n        }\n\n        .pure-button:focus {\n            outline: 0\n        }\n\n        .pure-button-hover,\n        .pure-button:hover,\n        .pure-button:focus {\n            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#1a000000', GradientType=0);\n            background-image: -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(40%, rgba(0, 0, 0, .05)), color-stop(40%, rgba(0, 0, 0, .1)));\n            background-image: linear-gradient(transparent, rgba(0, 0, 0, .05) 40%, rgba(0, 0, 0, .1));\n        }\n\n        .button-success,\n        .button-error,\n        .button-warning,\n        .button-secondary {\n            color: white;\n            -webkit-border-radius: 4px;\n                    border-radius: 4px;\n            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n        }\n\n        .button-success {\n            background: rgb(28, 184, 65);\n        }\n\n        .button-error {\n            background: rgb(202, 60, 60);\n        }\n\n        .button-warning {\n            background: rgb(223, 117, 20);\n        }\n\n        .button-secondary {\n            background: rgb(66, 184, 221);\n        }\n\n        .tools {\n            position: absolute;\n            bottom: 20px;\n            right: 20px;\n            text-align: center;\n        }\n\n        .tools .pure-button {\n            display: inline-block;\n            margin: 5px;\n            padding: 10px 0;\n            text-align: center;\n            width: 50px;\n        }\n\n        .mask {\n            -webkit-filter: blur(5px);\n        }\n\n        #main {\n            -webkit-transition: all .3s;\n            transition: all .3s;\n        }\n\n        .wrapper {\n            height: 100%;\n            position: absolute;\n            width: 100%;\n            color: #fff;\n            overflow: hidden;\n            font-size: 1.4vw;\n            text-shadow: 1px 1px #000;\n        }\n\n        .right {\n            position: absolute;\n            visibility: hidden;\n            white-space: nowrap;\n            right: 0;\n            /*left: 700px;*/\n            -webkit-transform: translateX(100vw);\n                -ms-transform: translateX(100vw);\n                    transform: translateX(100vw);\n        }\n\n        .left {\n            position: absolute;\n            white-space: nowrap;\n            -webkit-user-select: none;\n               -moz-user-select: none;\n                -ms-user-select: none;\n                    user-select: none;\n            -webkit-transition: -webkit-transform 10s linear;\n            transition: -webkit-transform 10s linear;\n            transition: transform 10s linear;\n            transition: transform 10s linear, -webkit-transform 10s linear;\n            /* 时间相同 越长的弹幕滑动距离越长 所以越快~ */\n        }</style>\n</head>\n\n<body>\n\n    <div class=\"wrapper\" id=\"wrapper\"></div>\n    <div id=\"main\" class=\"wall\"></div>\n    <div id=\"result\" class=\"result\"></div>\n    <div id=\"tools\" class=\"tools\">\n        <button v-on=\"click: onClick($value)\" class=\"pure-button\" v-class=\"button-error: selected == $value\" v-repeat=\"btns\">{{$value}}</button>\n        <button class=\"pure-button\" v-on=\"click: toggle\" v-class=\"\n                button-secondary: !running,\n                button-success: running\n            \">{{running?'停!':'开始'}}</button>\n        <button class=\"pure-button button-warning\" v-on=\"click: reset\">重置</button>\n    </div>\n    <audio src=\"/5cd20d01098e0653e5646ce36253c6d3.mp3\" id=\"music\"></audio>\n\n    <script type=\"text/javascript\" src=\"/adba75d164cbc74cc938ac9e6f817b7a.js\"></script>\n\n    <!-- <script src=\"https://cdn.bootcss.com/vue/0.12.5/vue.js\"></script> -->\n    <script type=\"text/javascript\" src=\"/0b7e967c100876517478f39236d70944.js\">\n    </script>\n    <script type=\"text/javascript\" src=\"/0357a363dc7fba25ac3ffb6cb65b502a.js\"></script>\n    <script type=\"text/javascript\" src=\"/d0485e4644333ffc400c3ab92bb2e51e.js\">\n    </script>\n    <script type=\"text/javascript\" src=\"/a3e50cc02c1f4118177976015b43b0b4.js\">\n    </script>\n\n    <script>(function () {\n  /*\n   ***************分割线\n   */\n  var choosed = JSON.parse(localStorage.getItem('choosed')) || {};\n\n  var speed = function speed() {\n    return [0.1 * Math.random() + 0.01, -(0.1 * Math.random() + 0.01)];\n  };\n\n  var getKey = function getKey(item) {\n    return item.name + '-' + item.phone;\n  };\n\n  var createHTML = function createHTML() {\n    var html = ['<ul>'];\n    member.forEach(function (item, index) {\n      item.index = index;\n      var key = getKey(item);\n      var color = choosed[key] ? 'yellow' : 'white';\n      html.push(\"<li>\\n                            <a href=\\\"#\\\"\\n                            style=\\\"color: \".concat(color, \"\\\">\\n                                <span> \").concat(item.name, \" </span>\\n                                <img src=\\\"./img/avtar.jpg\\\"\\n                                    height=\\\"40\\\"\\n                                    width=\\\"40\\\">\\n                            </a>\\n\\n                    </li>\"));\n    });\n    html.push('</ul>');\n    return html.join('');\n  };\n\n  var lottery = function lottery(count) {\n    var list = canvas.getElementsByTagName('a');\n    var color = 'yellow';\n    var ret = member.filter(function (m, index) {\n      m.index = index;\n      return !choosed[getKey(m)];\n    }).map(function (m) {\n      return Object.assign({\n        score: Math.random()\n      }, m);\n    }).sort(function (a, b) {\n      return a.score - b.score;\n    }).slice(0, count).map(function (m) {\n      choosed[getKey(m)] = 1;\n      list[m.index].style.color = color;\n      return \"<img src=\\\"./img/avtar.jpg\\\"\\n                        height=\\\"100\\\"\\n                        width=\\\"100\\\"> <br /> \".concat(m.name);\n    });\n    localStorage.setItem('choosed', JSON.stringify(choosed));\n    return ret;\n  };\n\n  var canvas = document.createElement('canvas');\n  canvas.id = 'myCanvas';\n  canvas.width = document.body.offsetWidth;\n  canvas.height = document.body.offsetHeight;\n  document.getElementById('main').appendChild(canvas);\n  new Vue({\n    el: '#tools',\n    data: {\n      selected: 1,\n      running: false,\n      btns: [12, 8, 5, 2, 1],\n      bg_music: {}\n    },\n    ready: function ready() {\n      canvas.innerHTML = createHTML();\n      TagCanvas.Start('myCanvas', '', {\n        textColour: null,\n        initial: speed(),\n        dragControl: 1,\n        textHeight: 14,\n        lock: \"x\",\n        offsetY: -60\n      });\n      this.bg_music = document.getElementById(\"music\");\n    },\n    methods: {\n      reset: function reset() {\n        if (confirm('确定要重置么？所有之前的抽奖历史将被清除！')) {\n          localStorage.clear();\n          location.reload(true);\n        }\n      },\n      onClick: function onClick(num) {\n        $('#result').css('display', 'none');\n        $('#main').removeClass('mask');\n        this.selected = num;\n      },\n      toggle: function toggle() {\n        if (this.running) {\n          this.bg_music.pause();\n          this.bg_music.currentTime = 0;\n          TagCanvas.SetSpeed('myCanvas', speed());\n          var ret = lottery(this.selected);\n          $('#result').css('display', 'block').html('<span>' + ret.join('</span><span>') + '</span>');\n          TagCanvas.Reload('myCanvas');\n          setTimeout(function () {\n            localStorage.setItem(new Date().toString(), JSON.stringify(ret));\n            $('#main').addClass('mask');\n          }, 0);\n        } else {\n          this.bg_music.currentTime = 0;\n          this.bg_music.play();\n          $('#result').css('display', 'none');\n          $('#main').removeClass('mask');\n          TagCanvas.SetSpeed('myCanvas', [5, 1]);\n        }\n\n        this.running = !this.running;\n      }\n    }\n  });\n})();</script>\n</body>\n\n</html>"},"hash":"fc48905502620cd395f0ba0c25ab21b1","cacheData":{"env":{}}}